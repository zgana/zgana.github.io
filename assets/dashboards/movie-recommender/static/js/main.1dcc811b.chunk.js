(this["webpackJsonpmovie-recommendations"]=this["webpackJsonpmovie-recommendations"]||[]).push([[0],{14:function(e,t,n){e.exports=n(39)},19:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=(n(19),n(5)),c=n(2),s=n(3),u=n(7),m=n(6),h=n(4),g=n(11),d=n.n(g),p=n(12),f=n.n(p),v=n(13);n(37),n(38);function E(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(e){return e.title}function j(e){return r.a.createElement("span",null,e.title," (",e.year,")")}v.a.initialize("UA-166956768-1");var w=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n})},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:a.props.getSuggestions(t)})},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.onSuggestionSelected=function(e,t){var n=t.suggestion;t.suggestionValue,t.suggestionIndex,t.sectionIndex,t.method;a.props.onSelected(n),a.setState({value:""})},a.onRandomAdd=function(){var e,t,n=a.props.getSuggestions("",!0),r=n.length,i=(e=0,t=r-1,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);a.props.onSelected(n[i])},a.state={value:"",suggestions:[]},a.onRandomAdd=a.onRandomAdd.bind(Object(u.a)(a)),a}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.suggestions,a={placeholder:"Enter a movie title.",value:t,onChange:this.onChange};return r.a.createElement("div",{className:"titleInput"},r.a.createElement(d.a,{suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:b,renderSuggestion:j,inputProps:a,onSuggestionSelected:this.onSuggestionSelected}),r.a.createElement(C,{onClickCB:this.onRandomAdd}))}}]),n}(r.a.Component),S=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this,e,a)).handleChange=r.handleChange.bind(Object(u.a)(r)),r}return Object(s.a)(n,[{key:"handleChange",value:function(e){this.props.onChangeCB(e)}},{key:"render",value:function(){return r.a.createElement(f.a,{value:this.props.value,orientation:"horizontal",onChange:this.handleChange})}}]),n}(r.a.Component),y=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"weight"},r.a.createElement(S,{onChangeCB:this.props.onChangeCB,value:this.props.value}))}}]),n}(r.a.Component),C=function(e){return r.a.createElement("button",{className:"plus",id:"random",onClick:e.onClickCB}," \ud83c\udfb2 ")},O=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=function(e,t,n,a){if(void 0===e)return[];var r=t.map((function(e){return e.index}));if(0===r.length)return[];for(var i=Array.from(new Set([].concat.apply([],t.map((function(e){return e.tags_enc}))))),o=Array.from(new Set([].concat.apply([],t.map((function(e){return e.genres_enc}))))),l=Array.from(new Set([].concat.apply([],t.map((function(e){return e.nconst_enc}))))),c=e.length,s=Array(c),u=0;u<c;u++){var m=e[u],h=m.tags_enc,g=i.filter((function(e){return h.includes(e)})),d=m.genres_enc,p=o.filter((function(e){return d.includes(e)})),f=m.nconst_enc,v=l.filter((function(e){return f.includes(e)})),E=0;r.includes(u)||(E=a[0]*g.length+a[1]*p.length+a[2]*v.length),s[u]={item:m,score:E,why_tag:g,why_genre:p,why_nconst:v}}return(s=s.sort((function(e,t){return t.score-e.score}))).slice(0,n)}(this.props.all_titles,this.props.items,this.props.nrecs,this.props.weight).map((function(t){var n=t,a=(t.score,"imdb.com/title/"+(t=t.item).tconst+"/"),i="http://www."+a;return r.a.createElement("li",{className:"title",key:t.index+1e5},r.a.createElement("button",{className:"plus",onClick:function(){return e.props.addItem(t)}}," + "),r.a.createElement("div",{className:"tooltip"},r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},"(",t.year,") ",t.title),r.a.createElement("div",{className:"tooltiptext"},r.a.createElement("h4",null,t.title),r.a.createElement("p",null,t.synopsis),r.a.createElement("h4",null,"Shared People:"),r.a.createElement("p",null,n.why_nconst.map((function(t){return e.props.metadata.nconsts[t]})).join(", ")),r.a.createElement("h4",null,"Shared Tags:"),r.a.createElement("p",null,n.why_tag.map((function(t){return e.props.metadata.tags[t]})).join(", ")),r.a.createElement("h4",null,"Shared Genres:"),r.a.createElement("p",null,n.why_genre.map((function(t){return e.props.metadata.genres[t]})).join(", ")),r.a.createElement("hr",null),r.a.createElement("p",null,a))))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"What you might like:"),r.a.createElement("ul",{className:"results"},t))}}]),n}(r.a.Component),_=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSelected=function(e){a.setState((function(t){var n=t.items.concat(e);return Object(l.a)(Object(l.a)({},t),{},{items:n})}))},a.removeItem=function(e){a.setState((function(t){var n=t.items.filter((function(t){return t.index!==e}));return Object(l.a)(Object(l.a)({},t),{},{items:n})}))},a.changeWeight=function(e,t){a.setState((function(n){var a=n.weight;return a[e]=t,Object(l.a)(Object(l.a)({},n),{},{weight:a})}))},a.state={items:Array(0),weight:[100,100,100],nrecs:15},a}return Object(s.a)(n,[{key:"getSuggestions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=E(t.trim());if(""===a&&n)return[];var r=new RegExp("^"+a,"i"),i=e.props.all_titles.filter((function(e){return r.test(e.title)})),o=e.state.items.map((function(e){return e.index}));return i.filter((function(e){return o.indexOf(e.index)<0}))}},{key:"render",value:function(){var e=this,t=this.state.items.map((function(t){var n="imdb.com/title/"+t.tconst+"/",a="http://www."+n;return r.a.createElement("li",{className:"title",key:t.index},r.a.createElement("button",{className:"minus",onClick:function(){return e.removeItem(t.index)}}," x "),r.a.createElement("div",{className:"tooltip"},r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"(",t.year,") ",t.title),r.a.createElement("div",{className:"tooltiptext"},r.a.createElement("h4",null,t.title),r.a.createElement("p",null,t.synopsis),r.a.createElement("h4",null,"People:"),r.a.createElement("p",null,t.nconst_enc.map((function(t){return e.props.metadata.nconsts[t]})).join(", ")),r.a.createElement("h4",null,"Tags:"),r.a.createElement("p",null,t.tags_enc.map((function(t){return e.props.metadata.tags[t]})).join(", ")),r.a.createElement("h4",null,"Genres:"),r.a.createElement("p",null,t.genres_enc.map((function(t){return e.props.metadata.genres[t]})).join(", ")),r.a.createElement("hr",null),r.a.createElement("p",null,n))))}));return r.a.createElement("div",null,r.a.createElement("div",{className:"ui_section"},r.a.createElement("h2",null,"What do you like?"),r.a.createElement(w,{id:"title",onSelected:function(t){return e.handleSelected(t)},getSuggestions:function(t){return e.getSuggestions(e,t)}}),r.a.createElement("ul",null,t),r.a.createElement("h2",null,"How do you want it?"),r.a.createElement("div",{className:"weight"},"People"),r.a.createElement("div",{className:"weight"},"Tags"),r.a.createElement("div",{className:"weight"},"Genres"),r.a.createElement("br",null),r.a.createElement(y,{onChangeCB:function(t){return e.changeWeight(2,t)},value:this.state.weight[2]}),r.a.createElement(y,{onChangeCB:function(t){return e.changeWeight(0,t)},value:this.state.weight[0]}),r.a.createElement(y,{onChangeCB:function(t){return e.changeWeight(1,t)},value:this.state.weight[1]})),r.a.createElement("div",{className:"ui_section"},r.a.createElement(O,{all_titles:this.props.all_titles,items:this.state.items,nrecs:this.state.nrecs,weight:this.state.weight,addItem:function(t){return e.handleSelected(t)},metadata:this.props.metadata})))}}]),n}(r.a.Component),k=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={all_titles:Array(0),metadata:{}},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this,t="https://zgana-app-data.s3.us-east-2.amazonaws.com/movie-recommendations/";fetch("".concat(t,"titles.json")).then((function(e){return e.json()})).then((function(n){fetch("".concat(t,"metadata.json")).then((function(e){return e.json()})).then((function(t){return e.setState({metadata:t,all_titles:n})}))})).catch((function(e){throw e}))}},{key:"render",value:function(){return r.a.createElement(_,{all_titles:this.state.all_titles,metadata:this.state.metadata})}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.1dcc811b.chunk.js.map