(this["webpackJsonpmovie-recommendations"]=this["webpackJsonpmovie-recommendations"]||[]).push([[0],{14:function(e,t,n){e.exports=n(40)},19:function(e,t,n){},37:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=(n(19),n(6)),c=n(7),s=n(2),u=n(3),m=n(5),h=n(4),g=n(11),p=n.n(g),d=n(12),f=n.n(d),v=n(13);n(37),n(38),n(39);function E(e){return e.title}function b(e){return r.a.createElement("span",null,e.title," (",e.year,")")}v.a.initialize("UA-166956768-1");var j=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n})},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:a.props.getSuggestions(t)})},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.onSuggestionSelected=function(e,t){var n=t.suggestion;t.suggestionValue,t.suggestionIndex,t.sectionIndex,t.method;a.props.onSelected(n),a.setState({value:""})},a.state={value:"",suggestions:[]},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.suggestions,a={placeholder:"Enter a movie title.",value:t,onChange:this.onChange};return r.a.createElement(p.a,{suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:E,renderSuggestion:b,inputProps:a,onSuggestionSelected:this.onSuggestionSelected})}}]),n}(r.a.Component),w=(r.a.Component,function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e,a){var r;return Object(s.a)(this,n),r=t.call(this,e,a),console.log(r.props.onChangeCB),r.handleChange=r.handleChange.bind(Object(c.a)(r)),r}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.props.onChangeCB(e)}},{key:"render",value:function(){return r.a.createElement(f.a,{value:this.props.value,orientation:"horizontal",onChange:this.handleChange})}}]),n}(r.a.Component)),S=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"weight"},r.a.createElement(w,{onChangeCB:this.props.onChangeCB,value:this.props.value}))}}]),n}(r.a.Component),y=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=function(e,t,n,a){if(void 0===e)return[];var r=t.map((function(e){return e.index}));if(0==r.length)return[];for(var i=Array.from(new Set([].concat.apply([],t.map((function(e){return e.tags_enc}))))),o=Array.from(new Set([].concat.apply([],t.map((function(e){return e.genres_enc}))))),l=Array.from(new Set([].concat.apply([],t.map((function(e){return e.nconst_enc}))))),c=e.length,s=Array(c),u=0;u<c;u++){var m=e[u],h=m.tags_enc,g=i.filter((function(e){return h.includes(e)})),p=m.genres_enc,d=o.filter((function(e){return p.includes(e)})),f=m.nconst_enc,v=l.filter((function(e){return f.includes(e)})),E=0;r.includes(u)||(E=a[0]*g.length+a[1]*d.length+a[2]*v.length),s[u]={item:m,score:E,why_tag:g,why_genre:d,why_nconst:v}}return(s=s.sort((function(e,t){return t.score-e.score}))).slice(0,n)}(this.props.all_titles,this.props.items,this.props.nrecs,this.props.weight).map((function(t){var n=t,a=(t.score,"https://www.imdb.com/title/"+(t=t.item).tconst+"/");return r.a.createElement("li",{className:"title",key:t.index+1e5},r.a.createElement("button",{className:"plus",onClick:function(){return e.props.addItem(t)}}," + "),r.a.createElement("div",{className:"tooltip"},r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"(",t.year,") ",t.title),r.a.createElement("div",{className:"tooltiptext"},r.a.createElement("h4",null,"Shared People:"),r.a.createElement("p",null,n.why_nconst.map((function(t){return e.props.metadata.nconsts[t]})).join(", ")),r.a.createElement("h4",null,"Shared Tags:"),r.a.createElement("p",null,n.why_tag.map((function(t){return e.props.metadata.tags[t]})).join(", ")),r.a.createElement("h4",null,"Shared Genres:"),r.a.createElement("p",null,n.why_genre.map((function(t){return e.props.metadata.genres[t]})).join(", ")),r.a.createElement("hr",null),r.a.createElement("p",null,a))))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"What you might like:"),r.a.createElement("ul",{className:"results"},t))}}]),n}(r.a.Component),C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSelected=function(e){a.setState((function(t){var n=t.items.concat(e);return Object(l.a)(Object(l.a)({},t),{},{items:n})}))},a.removeItem=function(e){console.log("removing: "+e),a.setState((function(t){var n=t.items.filter((function(t){return t.index!=e}));return Object(l.a)(Object(l.a)({},t),{},{items:n})}))},a.changeWeight=function(e,t){a.setState((function(n){var a=n.weight;return a[e]=t,Object(l.a)(Object(l.a)({},n),{},{weight:a})}))},a.state={items:Array(0),weight:[100,100,100],nrecs:15},a}return Object(u.a)(n,[{key:"getSuggestions",value:function(e,t){var n=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(""===n)return[];var a=new RegExp("^"+n,"i"),r=e.props.all_titles.filter((function(e){return a.test(e.title)})),i=e.state.items.map((function(e){return e.index}));return r.filter((function(e){return i.indexOf(e.index)<0}))}},{key:"render",value:function(){var e=this,t=this.state.items.map((function(t){var n="https://www.imdb.com/title/"+t.tconst+"/";return r.a.createElement("li",{className:"title",key:t.index},r.a.createElement("button",{className:"minus",onClick:function(){return e.removeItem(t.index)}}," x "),r.a.createElement("div",{className:"tooltip"},r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"(",t.year,") ",t.title),r.a.createElement("div",{className:"tooltiptext"},r.a.createElement("h4",null,"People:"),r.a.createElement("p",null,t.nconst_enc.map((function(t){return e.props.metadata.nconsts[t]})).join(", ")),r.a.createElement("h4",null,"Tags:"),r.a.createElement("p",null,t.tags_enc.map((function(t){return e.props.metadata.tags[t]})).join(", ")),r.a.createElement("h4",null,"Genres:"),r.a.createElement("p",null,t.genres_enc.map((function(t){return e.props.metadata.genres[t]})).join(", ")),r.a.createElement("hr",null),r.a.createElement("p",null,n))))}));return r.a.createElement("div",null,r.a.createElement("div",{className:"ui_section"},r.a.createElement("h2",null,"What do you like?"),r.a.createElement(j,{id:"title",onSelected:function(t){return e.handleSelected(t)},getSuggestions:function(t){return e.getSuggestions(e,t)}}),r.a.createElement("ul",null,t),r.a.createElement("h2",null,"How do you want it?"),r.a.createElement("div",{className:"weight"},"People"),r.a.createElement("div",{className:"weight"},"Tags"),r.a.createElement("div",{className:"weight"},"Genres"),r.a.createElement("br",null),r.a.createElement(S,{onChangeCB:function(t){return e.changeWeight(2,t)},value:this.state.weight[2]}),r.a.createElement(S,{onChangeCB:function(t){return e.changeWeight(0,t)},value:this.state.weight[0]}),r.a.createElement(S,{onChangeCB:function(t){return e.changeWeight(1,t)},value:this.state.weight[1]})),r.a.createElement("div",{className:"ui_section"},r.a.createElement(y,{all_titles:this.props.all_titles,items:this.state.items,nrecs:this.state.nrecs,weight:this.state.weight,addItem:function(t){return e.handleSelected(t)},metadata:this.props.metadata})))}}]),n}(r.a.Component),O=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={all_titles:Array(0),metadata:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("titles.json").then((function(e){return e.json()})).then((function(t){fetch("metadata.json").then((function(e){return e.json()})).then((function(n){return e.setState({metadata:n,all_titles:t})}))})).catch((function(e){throw e}))}},{key:"render",value:function(){return r.a.createElement(C,{all_titles:this.state.all_titles,metadata:this.state.metadata})}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.831729c0.chunk.js.map